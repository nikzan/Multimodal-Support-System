<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Nova Support</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="admin-dashboard.css">
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h1>Nova Support</h1>
                <span class="badge">Admin</span>
            </div>
            
            <nav class="nav">
                <a href="#tickets" class="nav-item active" data-view="tickets">
                    <span class="icon">üìã</span>
                    <span>–¢–∏–∫–µ—Ç—ã</span>
                    <span class="count" id="ticketsCount">26</span>
                </a>
                <a href="#analytics" class="nav-item" data-view="analytics">
                    <span class="icon">üìä</span>
                    <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                </a>
                <a href="#knowledge" class="nav-item" data-view="knowledge">
                    <span class="icon">üìö</span>
                    <span>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</span>
                    <span class="count" id="kbCount">6</span>
                </a>
                <a href="#settings" class="nav-item" data-view="settings">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </nav>
            
            <div class="connection-status">
                <div id="wsStatus" class="status disconnected">
                    <span class="dot"></span>
                    <span class="text">–û—Ç–∫–ª—é—á–µ–Ω–æ</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h2 id="viewTitle">–¢–∏–∫–µ—Ç—ã</h2>
                <div class="header-actions">
                    <select id="projectFilter" class="select">
                        <option value="1">Demo Sneakers Store</option>
                    </select>
                    <button class="btn btn-primary" id="refreshBtn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
            </header>

            <!-- Tickets View -->
            <section id="ticketsView" class="view active">
                <!-- Filters -->
                <div class="filters">
                    <div class="filter-group">
                        <label>–°—Ç–∞—Ç—É—Å:</label>
                        <select id="statusFilter" class="select">
                            <option value="">–í—Å–µ</option>
                            <option value="OPEN">–û—Ç–∫—Ä—ã—Ç—ã</option>
                            <option value="CLOSED">–ó–∞–∫—Ä—ã—Ç—ã</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                        <select id="priorityFilter" class="select">
                            <option value="">–í—Å–µ</option>
                            <option value="CRITICAL">–ö—Ä–∏—Ç–∏—á–Ω—ã–µ</option>
                            <option value="HIGH">–í—ã—Å–æ–∫–∏–µ</option>
                            <option value="LOW">–ù–∏–∑–∫–∏–µ</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</label>
                        <select id="sentimentFilter" class="select">
                            <option value="">–í—Å–µ</option>
                            <option value="NEGATIVE">–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="NEUTRAL">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ</option>
                            <option value="POSITIVE">–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <input type="text" id="searchInput" class="input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É...">
                    </div>
                </div>

                <!-- Tickets List -->
                <div class="tickets-container">
                    <div id="ticketsList" class="tickets-list">
                        <!-- Tickets will be inserted here -->
                    </div>
                    
                    <div id="loadingSpinner" class="loading">
                        <div class="spinner"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                    </div>
                    
                    <div id="emptyState" class="empty-state" style="display: none;">
                        <div class="empty-icon">üì≠</div>
                        <h3>–¢–∏–∫–µ—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</p>
                    </div>
                </div>
            </section>

            <!-- Analytics View -->
            <section id="analyticsView" class="view">
                <div class="analytics-grid">
                    <!-- Stats Cards -->
                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-icon critical">üî¥</div>
                            <div class="stat-info">
                                <h3 id="criticalCount">0</h3>
                                <p>–ö—Ä–∏—Ç–∏—á–Ω—ã–µ</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon high">üü†</div>
                            <div class="stat-info">
                                <h3 id="highCount">0</h3>
                                <p>–í—ã—Å–æ–∫–∏–µ</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon low">üü¢</div>
                            <div class="stat-info">
                                <h3 id="lowCount">0</h3>
                                <p>–ù–∏–∑–∫–∏–µ</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon total">üìä</div>
                            <div class="stat-info">
                                <h3 id="totalCount">0</h3>
                                <p>–í—Å–µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤</p>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="chart-card">
                        <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º</h3>
                        <canvas id="priorityChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é</h3>
                        <canvas id="sentimentChart"></canvas>
                    </div>
                    
                    <div class="chart-card wide">
                        <h3>–¢–∏–∫–µ—Ç—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</h3>
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Knowledge Base View -->
            <section id="knowledgeView" class="view">
                <div class="kb-header">
                    <button class="btn btn-primary" id="addKbBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</button>
                </div>
                
                <div id="kbList" class="kb-list">
                    <!-- KB articles will be inserted here -->
                </div>
            </section>

            <!-- Settings View -->
            <section id="settingsView" class="view">
                <div class="settings-card">
                    <h3>–ü—Ä–æ–µ–∫—Ç</h3>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:</label>
                        <input type="text" class="input" value="Demo Sneakers Store" readonly>
                    </div>
                    <div class="form-group">
                        <label>API –∫–ª—é—á:</label>
                        <input type="text" class="input" value="demo-api-key-12345" readonly>
                    </div>
                </div>
                
                <div class="settings-card">
                    <h3>WebSocket</h3>
                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞:</label>
                        <input type="text" id="wsUrl" class="input" value="http://localhost:8080/ws">
                    </div>
                    <button class="btn btn-primary" id="reconnectWs">üîÑ –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for ticket details -->
    <div id="ticketModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTicketTitle">–¢–∏–∫–µ—Ç #</h3>
                <button class="modal-close" id="closeModal">√ó</button>
            </div>
            <div class="modal-body" id="modalTicketBody">
                <!-- Ticket details will be inserted here -->
            </div>
        </div>
    </div>

    <script src="admin-dashboard.js"></script>
</body>
</html>
